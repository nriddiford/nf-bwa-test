/*
 * -------------------------------------------------
 *  Nextflow config file for running on the server
 * -------------------------------------------------
 */


process {
    //cpus = { checkMax( 2, 'cpus' ) }
    //memory = { checkMax( 4.GB * task.attempt, 'memory' ) }
    //time = { checkMax( 2.h * task.attempt, 'time' ) }

    errorStrategy = 'retry'
    maxRetries = 1
    maxErrors = '-1'

    withLabel: smallCpu { cpus = 1 }
    withLabel: medCpu { cpus = 4 }
    withLabel: bigCpu { cpus = 8 }
    withLabel: smallMem { memory = '2 GB' }
    withLabel: medMem { memory = '15 GB' }
    withLabel: bigMem { memory = '40 GB' }
}

params {
    config_profile_name = 'Server configuration'
    config_profile_description = 'Minimal test dataset to check pipeline functions on server'

    max_cpus = 4
    max_memory = 8.GB
    max_time = 5.h

    samplePlan = 'sample_plan.csv'

    adapters = "/data/users/nriddifo/Modules/Trimmomatic-0.36/adapters/adapters.fa"
    reads = "/data/kdi_prod/project_result/948/01.00/Analysis/Trimmo_out/HUM/dwnsamp/*{forward,reverse}.fq.gz"
    genome = "/data/kdi_prod/project_result/948/01.00/Analysis/Genomes/Dmel_6/bwa/dmel_6.12.fa"

    condaCacheDir = "$HOME/conda-cache-nextflow"
}
